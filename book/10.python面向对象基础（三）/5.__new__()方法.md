# \__new__()方法

## 1.\__new__()方法和\_\_init\_\_()方法的作用

**结构：**

```python
class 类名称(object):
    def __new__(cls):
        代码
        return 实例化的实例/object.__new__()
```

demo:

```python
class A(object):
    def __init__(self):
        print("这是 init 方法")

    def __new__(cls):
        print("这是 new 方法")
        return object.__new__(cls)

A()
```

**作用：**

使用类名（）创建对象时，python解释器首先会调用__new__方法为对象分配空间

\__new__是用一个object基类提供的内置静态方法主要作用:

**1、在内存中为对象分配空间**

**2、返回对象的引用**

python的解释器获得对象的引用用后将引用作为第一个参数传递给__init__方法



**重写\__new__方法的代码十分固定**

**1、重写__new__方法一定要return object.__new__(cls)**

**2、否则python 的解释器得不到分配空间的对象引用，就不会调用对象的初始化方法**

**3、注意：__new__是一个静态方法在调用时需要主动传递cls参数**

**4、创建对象时，new方法会被自动调用为对象分配空间return super().__new__(cls)返回对象的引用**



## 2. 总结

- `__new__`**至少要有一个参数cls，代表要实例化的类，此参数在实例化时由Python解释器自动提供**
- `__new__`**必须要有返回值，返回实例化出来的实例，这点在自己实现`__new__`时要特别注意，可以return父类`__new__`出来的实例，或者直接是object的`__new__`出来的实例**
- `__init__`**有一个参数self，就是这个`__new__`返回的实例，`__init__`在`__new__`的基础上可以完成一些其它初始化的动作，`__init__`不需要返回值**
- **我们可以将类比作制造商，`__new__`方法就是前期的原材料购买环节，`__init__`方法就是在有原材料的基础上，加工，初始化商品环节**


# python内存知识补充

## 1.引用（一）

**在python中，值是靠引用来传递来的。**

**我们可以用id()来判断两个变量是否为同一个值的引用。** 我们可以将id值理解为那块内存的地址标示。

demo01:

```python
a = 1
b = a
print(b)
print(a)
a = 2
print(b)
print(a)
```

运行结果：

```
1
1
1
2
```



demo02：

```python
a = [1,2]
b = a
print(b)
print(a)
a.append(3)
print(b)
print(a)
```

运行结果：

```python
[1,2]
[1,2]
[1,2,3]
[1,2,3]
```



为什么demo01和demo02的执行过程相同但是结果不同呢？

可以用**id()**方法来理解

demo01:

```python
a = 1
b = a
print(b)
print(id(b))
print(a)
print(id(a))
a = 2
print(b)
print(id(b))
print(a)
print(id(a))
```

运行结果：

```
1
4349635216
1
4349635216
1
4349635216  # b的引用地址不变
2
4349635248  # 此时a的引用地址已经变了
```

demo02：

```python
a = [1, 2]
b = a
print(b)
print(id(b))
print(a)
print(id(a))
a.append(3)
print(b)
print(id(b))
print(a)
print(id(a))
```

运行结果：

```
[1, 2]
140383118477632
[1, 2]
140383118477632
[1, 2, 3]
140383118477632
[1, 2, 3]
140383118477632
```

如图：

![id](../src/5.函数（二）/id_ref.png)

#### 总结：

- 之前为了更好的理解变量，咱们可以把`a=100`理解为变量a中存放了100，事实上变量a存储是100的引用（可理解为在内存中的一个编号）



## 2.可变、不可变类型

所谓可变类型与不可变类型是指：数据能够直接进行修改，如果能直接修改那么就是可变，否则是不可变

- **可变类型有： 列表、字典、集合**
- **不可变类型有： 数字、字符串、元组**



## 3.引用（二）

**引用当做实参**

demo:

```python
def test1(b):  # 变量b一定是一个局部变量，就看它指向的是谁？可变还是不可变
    b += b  # += 是直接对b指向的空间进行修改,而不是让b指向一个新的
    # b = b+b  # xx = xx+yyy 先把=号右边的结果计算出来,然后让b指向这个新的地方,不管原来b指向谁
                # 现在b一定指向这个新的地方

# a = [11, 22]
a = 100
test1(a)
print(a)
```

#### 总结：

- **Python中函数参数是引用传递（注意不是值传递）**
- **对于不可变类型，因变量不能修改，所以运算不会影响到变量自身**
- **而对于可变类型来说，函数体中的运算有可能会更改传入的参数变量**


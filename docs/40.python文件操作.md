# 文件操作

## 1.文件打开和关闭

### <1>打开文件

在python，使用open函数，可以打开一个已经存在的文件，或者创建一个新文件

结构：

```python
open(文件名，访问模式)
```

示例如下：

```python
    f = open('test.txt', 'w')
```

说明:

**访问模式：**

| 访问模式 | 说明                                                         |
| -------- | :----------------------------------------------------------- |
| r        | 以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。 |
| w        | 打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。 |
| a        | 打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。 |
| r+       | 打开一个文件用于读写。文件指针将会放在文件的开头。           |
| w+       | 打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。 |
| a+       | 打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。 |
| rb       | 以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。 |
| wb       | 以二进制格式打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。 |
| ab       | 以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。 |
| rb+      | 以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。 |
| wb+      | 以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。 |
| ab+      | 以二进制格式打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。 |

**文件路径：**

```
相对路径：相对与当前程序文件夹开始查找文件。使用方便，但是相同路径不一定是同一个文件，比较不安全。
    例: `a/b/c/1.txt`
绝对路径：从盘符开始查找文件。使用麻烦，但是相同路径必定是同一个文件，比较安全。
    例：`C:/User/xhy/Desktop/a/b/c/1.txt`
```

### <2>关闭文件

close( )

示例如下：

```python
    # 新建一个文件，文件名为:test.txt
    f = open('test.txt', 'w')

    # 关闭这个文件
    f.close()
```



## 2.文件读写

### <1>写数据(write)

使用write()可以完成向文件写入数据

demo: 新建一个文件 `file_write_test.py`,向其中写入如下代码:

```python
f = open('test.txt', 'w')
f.write('hello world, i am here!')
f.close()
```

注意：

- 如果文件不存在那么创建，如果存在那么就先清空，然后写入数据

### <2>读数据(read)

使用read(num)可以从文件中读取数据，num表示要从文件中读取的数据的长度（单位是字节），如果没有传入num，那么就表示读取文件中所有的数据

demo: 新建一个文件`file_read_test.py`，向其中写入如下代码:

```python
f = open('test.txt', 'r')
content = f.read(5)  # 最多读取5个数据
print(content)

print("-"*30)  # 分割线，用来测试

content = f.read()  # 从上次读取的位置继续读取剩下的所有的数据
print(content)

f.close()  # 关闭文件，这个可以是个好习惯哦
```

运行现象：

```
hello
------------------------------
 world, i am here!
```

注意：

- 如果用open打开文件时，如果使用的"r"，那么可以省略，即只写 `open('test.txt')`

### <3>读数据（readlines）

就像read没有参数时一样，readlines可以按照行的方式把整个文件中的内容进行一次性读取，并且返回的是一个列表，其中每一行的数据为一个元素

```python
#coding=utf-8

f = open('test.txt', 'r')
content = f.readlines()
print(type(content))

i=1
for temp in content:
    print("%d:%s" % (i, temp))
    i += 1

f.close()
```

### <4>读数据（readline）

```python
#coding=utf-8

f = open('test.txt', 'r')

content = f.readline()
print("1:%s" % content)

content = f.readline()
print("2:%s" % content)


f.close()
```

### **大文件处理，read加数字**

readlines：文件确定内容很少的情况下使用

readline：知道文件一行很少

read(1024\*8 )一般以8k每秒的速度读取

判断字符是否为空用判断长度是否等于0

